# XVC-Pico OpenOCD Configuration for CVA6 RISC-V Core
# Based on Digilent JTAG-HS2 configuration

# XVC (Xilinx Virtual Cable) interface
# interface xlnx-axi-xvc
# Default XVC-Pico server runs on localhost:2542
# xvc_url TCP:localhost:2542

# Alternative: if running XVC-Pico server on different host/port
# xvc_url TCP:192.168.1.100:2542
# adapter driver cmsis-dap
# JTAG speed - start conservative, can increase if stable
# adapter_khz 1000

# Reset configuration
reset_config trst_only
# none

# TAP declaration
set _CHIPNAME riscv
jtag newtap $_CHIPNAME cpu -irlen 5 -expected-id 0x249511C3

set _TARGETNAME $_CHIPNAME.cpu
target create $_TARGETNAME riscv -chain-position $_TARGETNAME -coreid 0

gdb_report_data_abort enable
gdb_report_register_access_error enable

riscv set_reset_timeout_sec 120
riscv set_command_timeout_sec 120

# prefer to use sba for system bus access
# riscv set_prefer_sba on
riscv set_mem_access sysbus progbuf abstract

# dump jtag chain
scan_chain
bindto 0.0.0.0

init
halt
echo "Ready for Remote Connections"

